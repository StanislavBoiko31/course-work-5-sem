{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stanislav\\\\Desktop\\\\new project\\\\frontend\\\\src\\\\components\\\\BookingForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axiosInstance from \"../axiosInstance\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookingForm = ({\n  services,\n  photographers,\n  allPhotographers,\n  isAuthenticated,\n  discount,\n  user,\n  onBookingSuccess,\n  additionalServices = []\n}) => {\n  _s();\n  var _services$find;\n  const [form, setForm] = useState({\n    service: \"\",\n    photographer: \"\",\n    date: \"\",\n    start_time: \"\",\n    guest_first_name: \"\",\n    guest_last_name: \"\",\n    guest_email: \"\"\n  });\n  const [selectedAdditionalServices, setSelectedAdditionalServices] = useState([]);\n  const [slots, setSlots] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [loadingSlots, setLoadingSlots] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [availableDates, setAvailableDates] = useState([]);\n  const [loadingDates, setLoadingDates] = useState(false);\n\n  // Генеруємо список недоступних дат для excludeDates\n  const getExcludedDates = () => {\n    if (availableDates.length === 0) return [];\n    const today = new Date();\n    const endDate = new Date();\n    endDate.setMonth(endDate.getMonth() + 3);\n    const excluded = [];\n    const current = new Date(today);\n    while (current <= endDate) {\n      const dateStr = current.toISOString().split('T')[0];\n      if (!availableDates.includes(dateStr)) {\n        excluded.push(new Date(current));\n      }\n      current.setDate(current.getDate() + 1);\n    }\n    return excluded;\n  };\n\n  // Фільтрація фотографів при зміні послуги\n  useEffect(() => {\n    if (form.service) {\n      const filteredPhotographers = allPhotographers.filter(ph => {\n        var _ph$user;\n        return ((_ph$user = ph.user) === null || _ph$user === void 0 ? void 0 : _ph$user.is_active) && Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service));\n      });\n      if (form.photographer && !filteredPhotographers.find(ph => ph.id === Number(form.photographer))) {\n        setForm(prev => ({\n          ...prev,\n          photographer: \"\",\n          start_time: \"\",\n          date: \"\"\n        }));\n        setAvailableDates([]);\n      }\n    }\n    // eslint-disable-next-line\n  }, [form.service, allPhotographers]);\n\n  // Завантаження доступних дат при виборі фотографа\n  useEffect(() => {\n    if (form.photographer && form.service) {\n      const fetchAvailableDates = async () => {\n        try {\n          setLoadingDates(true);\n          const response = await axiosInstance.get(\"/api/bookings/available_dates/\", {\n            params: {\n              photographer: form.photographer,\n              service: form.service\n            }\n          });\n          setAvailableDates(response.data.available_dates || []);\n          // Якщо вибрана дата більше не доступна, скидаємо її\n          if (form.date && !response.data.available_dates.includes(form.date)) {\n            setForm(prev => ({\n              ...prev,\n              date: \"\",\n              start_time: \"\"\n            }));\n          }\n        } catch (error) {\n          setAvailableDates([]);\n          console.error(\"Помилка завантаження доступних дат:\", error);\n        } finally {\n          setLoadingDates(false);\n        }\n      };\n      fetchAvailableDates();\n    } else {\n      setAvailableDates([]);\n      if (form.date) {\n        setForm(prev => ({\n          ...prev,\n          date: \"\",\n          start_time: \"\"\n        }));\n      }\n    }\n    // eslint-disable-next-line\n  }, [form.photographer, form.service]);\n\n  // Завантаження слотів при зміні service, photographer, date\n  useEffect(() => {\n    if (form.service && form.photographer && form.date) {\n      const fetchSlots = async () => {\n        try {\n          setLoadingSlots(true);\n          console.log(\"Запит слотів:\", {\n            service: form.service,\n            photographer: form.photographer,\n            date: form.date\n          });\n          const response = await axiosInstance.get(\"/api/bookings/available_slots/\", {\n            params: {\n              service: form.service,\n              photographer: form.photographer,\n              date: form.date\n            }\n          });\n          setSlots(response.data.slots || []);\n          setForm(prev => ({\n            ...prev,\n            start_time: \"\"\n          }));\n        } catch (error) {\n          var _error$response, _error$response$data;\n          setSlots([]);\n          setMessage(\"Помилка завантаження слотів: \" + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message));\n        } finally {\n          setLoadingSlots(false);\n        }\n      };\n      fetchSlots();\n    } else {\n      setSlots([]);\n      setForm(prev => ({\n        ...prev,\n        start_time: \"\"\n      }));\n    }\n    // eslint-disable-next-line\n  }, [form.service, form.photographer, form.date]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm({\n      ...form,\n      [name]: value\n    });\n    setErrors({\n      ...errors,\n      [name]: \"\"\n    });\n    setMessage(\"\");\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!form.service) newErrors.service = \"Оберіть послугу\";\n    if (!form.photographer) newErrors.photographer = \"Оберіть фотографа\";\n    if (!form.date) newErrors.date = \"Оберіть дату\";\n    if (!form.start_time) newErrors.start_time = \"Оберіть час\";\n    if (!isAuthenticated) {\n      if (!form.guest_first_name) newErrors.guest_first_name = \"Введіть ім'я\";\n      if (!form.guest_last_name) newErrors.guest_last_name = \"Введіть прізвище\";\n      if (!form.guest_email) newErrors.guest_email = \"Введіть email\";else if (!/^\\S+@\\S+\\.\\S+$/.test(form.guest_email)) newErrors.guest_email = \"Некоректний email\";\n    }\n    if (form.date) {\n      const selectedDate = new Date(form.date);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      if (selectedDate < today) {\n        newErrors.date = \"Не можна бронювати в минулому\";\n      }\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Підрахунок ціни з урахуванням знижки та додаткових послуг\n  const selectedService = services.find(s => s.id === Number(form.service));\n  const basePrice = selectedService ? Number(selectedService.price) : 0;\n  const additionalServicesPrice = selectedAdditionalServices.reduce((sum, id) => {\n    const service = additionalServices.find(s => s.id === id);\n    return sum + (service ? Number(service.price) : 0);\n  }, 0);\n  const fullPrice = basePrice + additionalServicesPrice;\n  // Знижка застосовується до загальної суми (основна послуга + додаткові послуги)\n  const discountAmount = isAuthenticated ? fullPrice * discount / 100 : 0;\n  const finalPrice = fullPrice - discountAmount;\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage(\"\");\n    if (!validateForm()) return;\n    try {\n      setLoading(true);\n      const payload = {\n        service_id: form.service,\n        photographer_id: form.photographer,\n        date: form.date,\n        start_time: form.start_time\n      };\n      if (selectedAdditionalServices.length > 0) {\n        payload.additional_service_ids = selectedAdditionalServices;\n      }\n      if (!isAuthenticated) {\n        payload.guest_first_name = form.guest_first_name;\n        payload.guest_last_name = form.guest_last_name;\n        payload.guest_email = form.guest_email;\n      }\n      await axiosInstance.post(\"/api/bookings/\", payload);\n      setMessage(`✅ Бронювання успішно створено! Сума до сплати: ${finalPrice} грн`);\n      setForm({\n        service: \"\",\n        photographer: \"\",\n        date: \"\",\n        start_time: \"\",\n        guest_first_name: \"\",\n        guest_last_name: \"\",\n        guest_email: \"\"\n      });\n      setSelectedAdditionalServices([]);\n      setSlots([]);\n      if (onBookingSuccess) onBookingSuccess();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage(\"❌ Помилка: \" + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const today = new Date().toISOString().split('T')[0];\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      maxWidth: 400,\n      margin: \"40px auto\",\n      border: \"1px solid #ccc\",\n      padding: 32,\n      borderRadius: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0411\\u0440\\u043E\\u043D\\u044E\\u0432\\u0430\\u043D\\u043D\\u044F \\u0444\\u043E\\u0442\\u043E\\u0441\\u0435\\u0441\\u0456\\u0457\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), !isAuthenticated && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u0406\\u043C'\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"guest_first_name\",\n          value: form.guest_first_name,\n          onChange: handleChange,\n          style: {\n            width: \"100%\",\n            padding: 8,\n            marginTop: 4\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this), errors.guest_first_name && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\",\n            fontSize: 12\n          },\n          children: errors.guest_first_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"guest_last_name\",\n          value: form.guest_last_name,\n          onChange: handleChange,\n          style: {\n            width: \"100%\",\n            padding: 8,\n            marginTop: 4\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), errors.guest_last_name && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\",\n            fontSize: 12\n          },\n          children: errors.guest_last_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"guest_email\",\n          type: \"email\",\n          value: form.guest_email,\n          onChange: handleChange,\n          style: {\n            width: \"100%\",\n            padding: 8,\n            marginTop: 4\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this), errors.guest_email && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\",\n            fontSize: 12\n          },\n          children: errors.guest_email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u041F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"service\",\n        value: form.service,\n        onChange: handleChange,\n        required: true,\n        style: {\n          width: \"100%\",\n          padding: 8,\n          marginTop: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u041E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), services.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: s.id,\n          children: [s.name, \" - \", s.price, \" \\u0433\\u0440\\u043D (\", s.duration, \" \\u0445\\u0432)\"]\n        }, s.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), form.service && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8,\n          fontWeight: \"bold\"\n        },\n        children: isAuthenticated && discount > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"\\u0412\\u0430\\u0448\\u0430 \\u0437\\u043D\\u0438\\u0436\\u043A\\u0430: \", discount, \"%\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 41\n          }, this), additionalServicesPrice > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"\\u041E\\u0441\\u043D\\u043E\\u0432\\u043D\\u0430 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0430: \", basePrice, \" \\u0433\\u0440\\u043D\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 53\n            }, this), \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u043A\\u043E\\u0432\\u0456 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0438: \", additionalServicesPrice, \" \\u0433\\u0440\\u043D\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 69\n            }, this)]\n          }, void 0, true), \"\\u0426\\u0456\\u043D\\u0430 \\u0437\\u0456 \\u0437\\u043D\\u0438\\u0436\\u043A\\u043E\\u044E: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"green\"\n            },\n            children: [finalPrice.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 34\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              textDecoration: \"line-through\",\n              color: \"#888\",\n              marginLeft: 8\n            },\n            children: [fullPrice.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 102\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [additionalServicesPrice > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"\\u041E\\u0441\\u043D\\u043E\\u0432\\u043D\\u0430 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0430: \", basePrice, \" \\u0433\\u0440\\u043D\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 53\n            }, this), \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u043A\\u043E\\u0432\\u0456 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0438: \", additionalServicesPrice, \" \\u0433\\u0440\\u043D\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 69\n            }, this)]\n          }, void 0, true), \"\\u0426\\u0456\\u043D\\u0430: \", fullPrice.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), form.service && additionalServices.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u043A\\u043E\\u0432\\u0456 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0438 (\\u043E\\u043F\\u0446\\u0456\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u043E):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8,\n          border: \"1px solid #ddd\",\n          borderRadius: 4,\n          padding: 12,\n          maxHeight: 200,\n          overflowY: \"auto\"\n        },\n        children: additionalServices.map(service => {\n          const servicePrice = Number(service.price);\n          // Розраховуємо ціну зі знижкою для цієї послуги\n          const servicePriceWithDiscount = isAuthenticated && discount > 0 ? servicePrice * (1 - discount / 100) : servicePrice;\n          return /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: \"block\",\n              marginBottom: 8,\n              cursor: \"pointer\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selectedAdditionalServices.includes(service.id),\n              onChange: e => {\n                if (e.target.checked) {\n                  setSelectedAdditionalServices([...selectedAdditionalServices, service.id]);\n                } else {\n                  setSelectedAdditionalServices(selectedAdditionalServices.filter(id => id !== service.id));\n                }\n              },\n              style: {\n                marginRight: 8\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 500\n              },\n              title: service.description || \"\",\n              children: service.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this), isAuthenticated && discount > 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  textDecoration: \"line-through\",\n                  color: \"#888\",\n                  marginRight: 4\n                },\n                children: [\"+\", servicePrice.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#28a745\",\n                  fontWeight: \"bold\"\n                },\n                children: [\"+\", servicePriceWithDiscount.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: 8,\n                color: \"#007bff\",\n                fontWeight: \"bold\"\n              },\n              children: [\"+\", servicePrice.toFixed(2), \" \\u0433\\u0440\\u043D\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 21\n            }, this)]\n          }, service.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this), selectedAdditionalServices.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8,\n          fontSize: 14,\n          color: \"#666\"\n        },\n        children: [\"\\u0412\\u0438\\u0431\\u0440\\u0430\\u043D\\u043E \\u0434\\u043E\\u0434\\u0430\\u0442\\u043A\\u043E\\u0432\\u0438\\u0445 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433: \", selectedAdditionalServices.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0424\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"photographer\",\n        value: form.photographer,\n        onChange: handleChange,\n        required: true,\n        style: {\n          width: \"100%\",\n          padding: 8,\n          marginTop: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: form.service ? `Оберіть фотографа для послуги \"${(_services$find = services.find(s => s.id === Number(form.service))) === null || _services$find === void 0 ? void 0 : _services$find.name}\"` : \"Спочатку оберіть послугу\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), photographers.filter(ph => {\n          var _ph$user2;\n          return ((_ph$user2 = ph.user) === null || _ph$user2 === void 0 ? void 0 : _ph$user2.is_active) && Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service));\n        }).map(p => {\n          var _p$user, _p$user2;\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p.id,\n            children: [(_p$user = p.user) === null || _p$user === void 0 ? void 0 : _p$user.first_name, \" \", (_p$user2 = p.user) === null || _p$user2 === void 0 ? void 0 : _p$user2.last_name]\n          }, p.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), form.service && photographers.filter(ph => Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service))).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          color: \"#666\",\n          marginTop: 4\n        },\n        children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0456\\u0432 \\u0434\\u043B\\u044F \\u0446\\u0456\\u0454\\u0457 \\u043F\\u043E\\u0441\\u043B\\u0443\\u0433\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0414\\u0430\\u0442\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), form.photographer && form.service ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: form.date ? new Date(form.date) : null,\n          onChange: date => {\n            if (date) {\n              const dateStr = date.toISOString().split('T')[0];\n              setForm(prev => ({\n                ...prev,\n                date: dateStr,\n                start_time: \"\"\n              }));\n              setErrors(prev => ({\n                ...prev,\n                date: \"\"\n              }));\n            } else {\n              setForm(prev => ({\n                ...prev,\n                date: \"\",\n                start_time: \"\"\n              }));\n            }\n          },\n          excludeDates: getExcludedDates(),\n          minDate: new Date(),\n          dateFormat: \"yyyy-MM-dd\",\n          placeholderText: \"\\u041E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0434\\u0430\\u0442\\u0443\",\n          required: true,\n          disabled: loadingDates,\n          className: \"form-control\",\n          style: {\n            width: \"100%\",\n            padding: 8\n          },\n          dayClassName: date => {\n            const dateStr = date.toISOString().split('T')[0];\n            const today = new Date().toISOString().split('T')[0];\n            // Якщо дата в минулому, не стилізуємо\n            if (dateStr < today) {\n              return \"\";\n            }\n            // Якщо дата доступна\n            if (availableDates.includes(dateStr)) {\n              return \"available-date\";\n            }\n            // Якщо дата недоступна - показуємо сірою\n            return \"unavailable-date\";\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), loadingDates && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            color: \"#666\",\n            marginTop: 4\n          },\n          children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u0438\\u0445 \\u0434\\u0430\\u0442...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 15\n        }, this), !loadingDates && availableDates.length === 0 && form.photographer && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            color: \"#666\",\n            marginTop: 4\n          },\n          children: \"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u0438\\u0445 \\u0434\\u0430\\u0442 \\u0434\\u043B\\u044F \\u0446\\u044C\\u043E\\u0433\\u043E \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"date\",\n        value: form.date,\n        onChange: handleChange,\n        min: today,\n        required: true,\n        disabled: true,\n        style: {\n          width: \"100%\",\n          padding: 8,\n          marginTop: 4,\n          backgroundColor: \"#f5f5f5\"\n        },\n        placeholder: \"\\u0421\\u043F\\u043E\\u0447\\u0430\\u0442\\u043A\\u0443 \\u043E\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }, this), errors.date && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\",\n          fontSize: 12,\n          marginTop: 4\n        },\n        children: errors.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"\\u0427\\u0430\\u0441:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"start_time\",\n        value: form.start_time,\n        onChange: handleChange,\n        required: true,\n        style: {\n          width: \"100%\",\n          padding: 8,\n          marginTop: 4\n        },\n        disabled: loadingSlots || slots.length === 0,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: loadingSlots ? \"Завантаження...\" : slots.length === 0 ? \"Немає доступних слотів\" : \"Оберіть час\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), slots.map(time => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: time,\n          children: time\n        }, time, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), loadingSlots && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 12,\n          color: \"#666\",\n          marginTop: 4\n        },\n        children: \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u0438\\u0445 \\u0441\\u043B\\u043E\\u0442\\u0456\\u0432...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: loading || !form.start_time || loadingSlots,\n      style: {\n        width: \"100%\",\n        padding: 12,\n        backgroundColor: \"#007bff\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: 4,\n        cursor: \"pointer\"\n      },\n      children: loading ? \"Створення...\" : \"Забронювати\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16,\n        color: message.includes('❌') ? 'red' : 'green'\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingForm, \"7hSNQNPRJ7IcAz8aTNAPOlCGDHk=\");\n_c = BookingForm;\nexport default BookingForm;\nvar _c;\n$RefreshReg$(_c, \"BookingForm\");","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","DatePicker","jsxDEV","_jsxDEV","Fragment","_Fragment","BookingForm","services","photographers","allPhotographers","isAuthenticated","discount","user","onBookingSuccess","additionalServices","_s","_services$find","form","setForm","service","photographer","date","start_time","guest_first_name","guest_last_name","guest_email","selectedAdditionalServices","setSelectedAdditionalServices","slots","setSlots","message","setMessage","loading","setLoading","loadingSlots","setLoadingSlots","errors","setErrors","availableDates","setAvailableDates","loadingDates","setLoadingDates","getExcludedDates","length","today","Date","endDate","setMonth","getMonth","excluded","current","dateStr","toISOString","split","includes","push","setDate","getDate","filteredPhotographers","filter","ph","_ph$user","is_active","Array","isArray","some","s","String","id","find","Number","prev","fetchAvailableDates","response","get","params","data","available_dates","error","console","fetchSlots","log","_error$response","_error$response$data","detail","handleChange","e","name","value","target","validateForm","newErrors","test","selectedDate","setHours","Object","keys","selectedService","basePrice","price","additionalServicesPrice","reduce","sum","fullPrice","discountAmount","finalPrice","handleSubmit","preventDefault","payload","service_id","photographer_id","additional_service_ids","post","err","_err$response","_err$response$data","onSubmit","style","maxWidth","margin","border","padding","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","onChange","width","marginTop","required","color","fontSize","type","map","duration","fontWeight","toFixed","textDecoration","marginLeft","maxHeight","overflowY","servicePrice","servicePriceWithDiscount","display","cursor","checked","marginRight","title","description","_ph$user2","p","_p$user","_p$user2","first_name","last_name","selected","excludeDates","minDate","dateFormat","placeholderText","disabled","className","dayClassName","min","backgroundColor","placeholder","time","_c","$RefreshReg$"],"sources":["C:/Users/Stanislav/Desktop/new project/frontend/src/components/BookingForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axiosInstance from \"../axiosInstance\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst BookingForm = ({\r\n  services,\r\n  photographers,\r\n  allPhotographers,\r\n  isAuthenticated,\r\n  discount,\r\n  user,\r\n  onBookingSuccess,\r\n  additionalServices = []\r\n}) => {\r\n  const [form, setForm] = useState({\r\n    service: \"\",\r\n    photographer: \"\",\r\n    date: \"\",\r\n    start_time: \"\",\r\n    guest_first_name: \"\",\r\n    guest_last_name: \"\",\r\n    guest_email: \"\"\r\n  });\r\n  const [selectedAdditionalServices, setSelectedAdditionalServices] = useState([]);\r\n  const [slots, setSlots] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingSlots, setLoadingSlots] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [availableDates, setAvailableDates] = useState([]);\r\n  const [loadingDates, setLoadingDates] = useState(false);\r\n  \r\n  // Генеруємо список недоступних дат для excludeDates\r\n  const getExcludedDates = () => {\r\n    if (availableDates.length === 0) return [];\r\n    const today = new Date();\r\n    const endDate = new Date();\r\n    endDate.setMonth(endDate.getMonth() + 3);\r\n    const excluded = [];\r\n    const current = new Date(today);\r\n    while (current <= endDate) {\r\n      const dateStr = current.toISOString().split('T')[0];\r\n      if (!availableDates.includes(dateStr)) {\r\n        excluded.push(new Date(current));\r\n      }\r\n      current.setDate(current.getDate() + 1);\r\n    }\r\n    return excluded;\r\n  };\r\n\r\n  // Фільтрація фотографів при зміні послуги\r\n  useEffect(() => {\r\n    if (form.service) {\r\n      const filteredPhotographers = allPhotographers.filter(ph => ph.user?.is_active &&\r\n        Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service))\r\n      );\r\n      if (form.photographer && !filteredPhotographers.find(ph => ph.id === Number(form.photographer))) {\r\n        setForm(prev => ({ ...prev, photographer: \"\", start_time: \"\", date: \"\" }));\r\n        setAvailableDates([]);\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [form.service, allPhotographers]);\r\n\r\n  // Завантаження доступних дат при виборі фотографа\r\n  useEffect(() => {\r\n    if (form.photographer && form.service) {\r\n      const fetchAvailableDates = async () => {\r\n        try {\r\n          setLoadingDates(true);\r\n          const response = await axiosInstance.get(\"/api/bookings/available_dates/\", {\r\n            params: {\r\n              photographer: form.photographer,\r\n              service: form.service\r\n            }\r\n          });\r\n          setAvailableDates(response.data.available_dates || []);\r\n          // Якщо вибрана дата більше не доступна, скидаємо її\r\n          if (form.date && !response.data.available_dates.includes(form.date)) {\r\n            setForm(prev => ({ ...prev, date: \"\", start_time: \"\" }));\r\n          }\r\n        } catch (error) {\r\n          setAvailableDates([]);\r\n          console.error(\"Помилка завантаження доступних дат:\", error);\r\n        } finally {\r\n          setLoadingDates(false);\r\n        }\r\n      };\r\n      fetchAvailableDates();\r\n    } else {\r\n      setAvailableDates([]);\r\n      if (form.date) {\r\n        setForm(prev => ({ ...prev, date: \"\", start_time: \"\" }));\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [form.photographer, form.service]);\r\n\r\n  // Завантаження слотів при зміні service, photographer, date\r\n  useEffect(() => {\r\n    if (form.service && form.photographer && form.date) {\r\n      const fetchSlots = async () => {\r\n        try {\r\n          setLoadingSlots(true);\r\n          console.log(\"Запит слотів:\", {\r\n            service: form.service,\r\n            photographer: form.photographer,\r\n            date: form.date\r\n          });\r\n          const response = await axiosInstance.get(\"/api/bookings/available_slots/\", {\r\n            params: {\r\n              service: form.service,\r\n              photographer: form.photographer,\r\n              date: form.date\r\n            }\r\n          });\r\n          setSlots(response.data.slots || []);\r\n          setForm(prev => ({ ...prev, start_time: \"\" }));\r\n        } catch (error) {\r\n          setSlots([]);\r\n          setMessage(\"Помилка завантаження слотів: \" + (error.response?.data?.detail || error.message));\r\n        } finally {\r\n          setLoadingSlots(false);\r\n        }\r\n      };\r\n      fetchSlots();\r\n    } else {\r\n      setSlots([]);\r\n      setForm(prev => ({ ...prev, start_time: \"\" }));\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [form.service, form.photographer, form.date]);\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setForm({ ...form, [name]: value });\r\n    setErrors({ ...errors, [name]: \"\" });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!form.service) newErrors.service = \"Оберіть послугу\";\r\n    if (!form.photographer) newErrors.photographer = \"Оберіть фотографа\";\r\n    if (!form.date) newErrors.date = \"Оберіть дату\";\r\n    if (!form.start_time) newErrors.start_time = \"Оберіть час\";\r\n    if (!isAuthenticated) {\r\n      if (!form.guest_first_name) newErrors.guest_first_name = \"Введіть ім'я\";\r\n      if (!form.guest_last_name) newErrors.guest_last_name = \"Введіть прізвище\";\r\n      if (!form.guest_email) newErrors.guest_email = \"Введіть email\";\r\n      else if (!/^\\S+@\\S+\\.\\S+$/.test(form.guest_email)) newErrors.guest_email = \"Некоректний email\";\r\n    }\r\n    if (form.date) {\r\n      const selectedDate = new Date(form.date);\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      if (selectedDate < today) {\r\n        newErrors.date = \"Не можна бронювати в минулому\";\r\n      }\r\n    }\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  // Підрахунок ціни з урахуванням знижки та додаткових послуг\r\n  const selectedService = services.find(s => s.id === Number(form.service));\r\n  const basePrice = selectedService ? Number(selectedService.price) : 0;\r\n  const additionalServicesPrice = selectedAdditionalServices.reduce((sum, id) => {\r\n    const service = additionalServices.find(s => s.id === id);\r\n    return sum + (service ? Number(service.price) : 0);\r\n  }, 0);\r\n  const fullPrice = basePrice + additionalServicesPrice;\r\n  // Знижка застосовується до загальної суми (основна послуга + додаткові послуги)\r\n  const discountAmount = isAuthenticated ? fullPrice * discount / 100 : 0;\r\n  const finalPrice = fullPrice - discountAmount;\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setMessage(\"\");\r\n    if (!validateForm()) return;\r\n    try {\r\n      setLoading(true);\r\n      const payload = {\r\n        service_id: form.service,\r\n        photographer_id: form.photographer,\r\n        date: form.date,\r\n        start_time: form.start_time,\r\n      };\r\n      if (selectedAdditionalServices.length > 0) {\r\n        payload.additional_service_ids = selectedAdditionalServices;\r\n      }\r\n      if (!isAuthenticated) {\r\n        payload.guest_first_name = form.guest_first_name;\r\n        payload.guest_last_name = form.guest_last_name;\r\n        payload.guest_email = form.guest_email;\r\n      }\r\n      await axiosInstance.post(\"/api/bookings/\", payload);\r\n      setMessage(`✅ Бронювання успішно створено! Сума до сплати: ${finalPrice} грн`);\r\n      setForm({ service: \"\", photographer: \"\", date: \"\", start_time: \"\", guest_first_name: \"\", guest_last_name: \"\", guest_email: \"\" });\r\n      setSelectedAdditionalServices([]);\r\n      setSlots([]);\r\n      if (onBookingSuccess) onBookingSuccess();\r\n    } catch (err) {\r\n      setMessage(\"❌ Помилка: \" + (err.response?.data?.detail || err.message));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const today = new Date().toISOString().split('T')[0];\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ maxWidth: 400, margin: \"40px auto\", border: \"1px solid #ccc\", padding: 32, borderRadius: 8 }}>\r\n      <h2>Бронювання фотосесії</h2>\r\n      {!isAuthenticated && (\r\n        <>\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label>Ім'я:</label>\r\n            <input\r\n              name=\"guest_first_name\"\r\n              value={form.guest_first_name}\r\n              onChange={handleChange}\r\n              style={{ width: \"100%\", padding: 8, marginTop: 4 }}\r\n              required\r\n            />\r\n            {errors.guest_first_name && <div style={{ color: \"red\", fontSize: 12 }}>{errors.guest_first_name}</div>}\r\n          </div>\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label>Прізвище:</label>\r\n            <input\r\n              name=\"guest_last_name\"\r\n              value={form.guest_last_name}\r\n              onChange={handleChange}\r\n              style={{ width: \"100%\", padding: 8, marginTop: 4 }}\r\n              required\r\n            />\r\n            {errors.guest_last_name && <div style={{ color: \"red\", fontSize: 12 }}>{errors.guest_last_name}</div>}\r\n          </div>\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label>Email:</label>\r\n            <input\r\n              name=\"guest_email\"\r\n              type=\"email\"\r\n              value={form.guest_email}\r\n              onChange={handleChange}\r\n              style={{ width: \"100%\", padding: 8, marginTop: 4 }}\r\n              required\r\n            />\r\n            {errors.guest_email && <div style={{ color: \"red\", fontSize: 12 }}>{errors.guest_email}</div>}\r\n          </div>\r\n        </>\r\n      )}\r\n      <div style={{ marginBottom: 16 }}>\r\n        <label>Послуга:</label>\r\n        <select name=\"service\" value={form.service} onChange={handleChange} required style={{ width: \"100%\", padding: 8, marginTop: 4 }}>\r\n          <option value=\"\">Оберіть послугу</option>\r\n          {services.map(s => (\r\n            <option key={s.id} value={s.id}>\r\n              {s.name} - {s.price} грн ({s.duration} хв)\r\n            </option>\r\n          ))}\r\n        </select>\r\n        {form.service && (\r\n          <div style={{ marginTop: 8, fontWeight: \"bold\" }}>\r\n            {isAuthenticated && discount > 0 ? (\r\n              <>\r\n                Ваша знижка: {discount}%<br />\r\n                {additionalServicesPrice > 0 && (\r\n                  <>\r\n                    Основна послуга: {basePrice} грн<br />\r\n                    Додаткові послуги: {additionalServicesPrice} грн<br />\r\n                  </>\r\n                )}\r\n                Ціна зі знижкою: <span style={{ color: \"green\" }}>{finalPrice.toFixed(2)} грн</span> <span style={{ textDecoration: \"line-through\", color: \"#888\", marginLeft: 8 }}>{fullPrice.toFixed(2)} грн</span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {additionalServicesPrice > 0 && (\r\n                  <>\r\n                    Основна послуга: {basePrice} грн<br />\r\n                    Додаткові послуги: {additionalServicesPrice} грн<br />\r\n                  </>\r\n                )}\r\n                Ціна: {fullPrice.toFixed(2)} грн\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {form.service && additionalServices.length > 0 && (\r\n        <div style={{ marginBottom: 16 }}>\r\n          <label>Додаткові послуги (опціонально):</label>\r\n          <div style={{ marginTop: 8, border: \"1px solid #ddd\", borderRadius: 4, padding: 12, maxHeight: 200, overflowY: \"auto\" }}>\r\n            {additionalServices.map(service => {\r\n              const servicePrice = Number(service.price);\r\n              // Розраховуємо ціну зі знижкою для цієї послуги\r\n              const servicePriceWithDiscount = isAuthenticated && discount > 0 \r\n                ? servicePrice * (1 - discount / 100) \r\n                : servicePrice;\r\n              \r\n              return (\r\n                <label key={service.id} style={{ display: \"block\", marginBottom: 8, cursor: \"pointer\" }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedAdditionalServices.includes(service.id)}\r\n                    onChange={(e) => {\r\n                      if (e.target.checked) {\r\n                        setSelectedAdditionalServices([...selectedAdditionalServices, service.id]);\r\n                      } else {\r\n                        setSelectedAdditionalServices(selectedAdditionalServices.filter(id => id !== service.id));\r\n                      }\r\n                    }}\r\n                    style={{ marginRight: 8 }}\r\n                  />\r\n                  <span \r\n                    style={{ fontWeight: 500 }}\r\n                    title={service.description || \"\"}\r\n                  >\r\n                    {service.name}\r\n                  </span>\r\n                  {isAuthenticated && discount > 0 ? (\r\n                    <span style={{ marginLeft: 8 }}>\r\n                      <span style={{ textDecoration: \"line-through\", color: \"#888\", marginRight: 4 }}>\r\n                        +{servicePrice.toFixed(2)} грн\r\n                      </span>\r\n                      <span style={{ color: \"#28a745\", fontWeight: \"bold\" }}>\r\n                        +{servicePriceWithDiscount.toFixed(2)} грн\r\n                      </span>\r\n                    </span>\r\n                  ) : (\r\n                    <span style={{ marginLeft: 8, color: \"#007bff\", fontWeight: \"bold\" }}>\r\n                      +{servicePrice.toFixed(2)} грн\r\n                    </span>\r\n                  )}\r\n                </label>\r\n              );\r\n            })}\r\n          </div>\r\n          {selectedAdditionalServices.length > 0 && (\r\n            <div style={{ marginTop: 8, fontSize: 14, color: \"#666\" }}>\r\n              Вибрано додаткових послуг: {selectedAdditionalServices.length}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      <div style={{ marginBottom: 16 }}>\r\n        <label>Фотограф:</label>\r\n        <select name=\"photographer\" value={form.photographer} onChange={handleChange} required style={{ width: \"100%\", padding: 8, marginTop: 4 }}>\r\n          <option value=\"\">\r\n            {form.service \r\n              ? `Оберіть фотографа для послуги \"${services.find(s => s.id === Number(form.service))?.name}\"`\r\n              : \"Спочатку оберіть послугу\"\r\n            }\r\n          </option>\r\n          {photographers\r\n            .filter(ph => ph.user?.is_active && (Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service))))\r\n            .map(p => (\r\n              <option key={p.id} value={p.id}>\r\n                {p.user?.first_name} {p.user?.last_name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n        {form.service && photographers.filter(ph => Array.isArray(ph.services) && ph.services.some(s => String(s.id) === String(form.service))).length === 0 && (\r\n          <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>\r\n            Немає фотографів для цієї послуги\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <label>Дата:</label>\r\n        {form.photographer && form.service ? (\r\n          <div style={{ marginTop: 4 }}>\r\n            <DatePicker\r\n              selected={form.date ? new Date(form.date) : null}\r\n              onChange={(date) => {\r\n                if (date) {\r\n                  const dateStr = date.toISOString().split('T')[0];\r\n                  setForm(prev => ({ ...prev, date: dateStr, start_time: \"\" }));\r\n                  setErrors(prev => ({ ...prev, date: \"\" }));\r\n                } else {\r\n                  setForm(prev => ({ ...prev, date: \"\", start_time: \"\" }));\r\n                }\r\n              }}\r\n              excludeDates={getExcludedDates()}\r\n              minDate={new Date()}\r\n              dateFormat=\"yyyy-MM-dd\"\r\n              placeholderText=\"Оберіть дату\"\r\n              required\r\n              disabled={loadingDates}\r\n              className=\"form-control\"\r\n              style={{ width: \"100%\", padding: 8 }}\r\n              dayClassName={(date) => {\r\n                const dateStr = date.toISOString().split('T')[0];\r\n                const today = new Date().toISOString().split('T')[0];\r\n                // Якщо дата в минулому, не стилізуємо\r\n                if (dateStr < today) {\r\n                  return \"\";\r\n                }\r\n                // Якщо дата доступна\r\n                if (availableDates.includes(dateStr)) {\r\n                  return \"available-date\";\r\n                }\r\n                // Якщо дата недоступна - показуємо сірою\r\n                return \"unavailable-date\";\r\n              }}\r\n            />\r\n            {loadingDates && (\r\n              <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>\r\n                Завантаження доступних дат...\r\n              </div>\r\n            )}\r\n            {!loadingDates && availableDates.length === 0 && form.photographer && (\r\n              <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>\r\n                Немає доступних дат для цього фотографа\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <input \r\n            type=\"date\" \r\n            name=\"date\" \r\n            value={form.date} \r\n            onChange={handleChange}\r\n            min={today}\r\n            required \r\n            disabled\r\n            style={{ width: \"100%\", padding: 8, marginTop: 4, backgroundColor: \"#f5f5f5\" }}\r\n            placeholder=\"Спочатку оберіть фотографа\"\r\n          />\r\n        )}\r\n        {errors.date && <div style={{ color: \"red\", fontSize: 12, marginTop: 4 }}>{errors.date}</div>}\r\n      </div>\r\n      <div style={{ marginBottom: 16 }}>\r\n        <label>Час:</label>\r\n        <select \r\n          name=\"start_time\" \r\n          value={form.start_time} \r\n          onChange={handleChange}\r\n          required \r\n          style={{ width: \"100%\", padding: 8, marginTop: 4 }}\r\n          disabled={loadingSlots || slots.length === 0}\r\n        >\r\n          <option value=\"\">\r\n            {loadingSlots ? \"Завантаження...\" : slots.length === 0 ? \"Немає доступних слотів\" : \"Оберіть час\"}\r\n          </option>\r\n          {slots.map(time => (\r\n            <option key={time} value={time}>{time}</option>\r\n          ))}\r\n        </select>\r\n        {loadingSlots && <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>Завантаження доступних слотів...</div>}\r\n      </div>\r\n      <button \r\n        type=\"submit\" \r\n        disabled={loading || !form.start_time || loadingSlots}\r\n        style={{ width: \"100%\", padding: 12, backgroundColor: \"#007bff\", color: \"white\", border: \"none\", borderRadius: 4, cursor: \"pointer\" }}\r\n      >\r\n        {loading ? \"Створення...\" : \"Забронювати\"}\r\n      </button>\r\n      {message && (\r\n        <div style={{ marginTop: 16, color: message.includes('❌') ? 'red' : 'green' }}>\r\n          {message}\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default BookingForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}